var split;
split=split||function(b){var a=String.prototype.split,f=/()??/.exec("")[1]===b,c;c=function(c,e,g){if("[object RegExp]"!==Object.prototype.toString.call(e))return a.call(c,e,g);var h=[],n=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),p=0;e=RegExp(e.source,n+"g");var q,k,l;c+="";f||(q=RegExp("^"+e.source+"$(?!\\s)",n));for(g=g===b?4294967295:g>>>0;k=e.exec(c);){n=k.index+k[0].length;if(n>p&&(h.push(c.slice(p,k.index)),!f&&1<k.length&&k[0].replace(q,function(){for(var a=1;a<
arguments.length-2;a++)arguments[a]===b&&(k[a]=b)}),1<k.length&&k.index<c.length&&Array.prototype.push.apply(h,k.slice(1)),l=k[0].length,p=n,h.length>=g))break;e.lastIndex===k.index&&e.lastIndex++}p===c.length?(l||!e.test(""))&&h.push(""):h.push(c.slice(p));return h.length>g?h.slice(0,g):h};String.prototype.split=function(a,b){return c(this,a,b)};return c}();
(function(){Array.prototype.clean=function(b){var a;for(a=0;a<this.length;)this[a]===b&&(this.splice(a,1),a--),a++;return this};String.prototype.wrapInBraces=function(){return this.replace(/^/,"{").replace(/$/,"}")};String.prototype.replaceSquareBracketsWithBraces=function(){return this.replace(/\[/g,"{").replace(/\]/g,"}")};String.prototype.removeWhitespace=function(){return this.replace(/\s+/g,"")};this.Parser=function(){function b(a){this.defaults=a}b.prototype.parse=function(a){var b;b={};if(""===
a)return b;a=this._prepareString(a);return this._toJSON(a)};b.prototype.addDefaultValue=function(a,b){this.defaults||(this.defaults={});return this.defaults[a]=b};b.prototype._prepareString=function(a){a=a.removeWhitespace();this.defaults&&(a=this._applyOptionValues(a));a=this._setUndefinedValues(a);return this._wrapWordsInQuotes(a)};b.prototype._applyOptionValues=function(a){var b,c,d,e,g;c="";a=this._splitIntoWords(a);b=e=0;for(g=a.length;e<g;b=++e)d=a[b],b=a[b+1],this.defaults[d]&&":"!==b&&(d+=
":"+this.defaults[d]),c+=d;return c};b.prototype._setUndefinedValues=function(a){var b,c,d,e,g,h;d=this._splitIntoWords(a);b=g=0;for(h=d.length;g<h;b=++g)if(e=d[b],a=d[b+1],c=d[b-1],/\]+/.test(a)&&":"!==c||","===a||void 0===a&&!/\]+/.test(e))d[b]+=":undefined";a=d.join("");b="";e=a.split(/(\[|,|\])/);c=0;for(d=e.length;c<d;c++)a=e[c],/.*:.*:.*/.test(a)&&(a=a.replace(":undefined","")),b+=a;return b};b.prototype._splitIntoWords=function(a){return split(a,/(:\[?|\]+,?|,)/).clean("")};b.prototype._wrapWordsInQuotes=
function(a){var b,c,d,e;b=this._splitIntoWords(a);a=d=0;for(e=b.length;d<e;a=++d)c=b[a],":"===c||/\]+/.test(c)||(":["===c||","===c)||(/^\d+$/.test(c)?b[a]=parseInt(c):b[a]="true"===c?!0:"false"===c?!1:'"'+c+'"');return b.join("")};b.prototype._toJSON=function(a){/\.*:\.*/.test(a)||(a+=':"undefined"');a=a.replaceSquareBracketsWithBraces().wrapInBraces();a=a.replace(/\\/g,"\\\\");return JSON.parse(a)};return b}()}).call(this);
[].filter||(Array.prototype.filter=function(b,a,f,c,d){f=this;c=[];for(d in f)~~d+""==d&&0<=d&&b.call(a,f[d],+d,f)&&c.push(f[d]);return c});var keys;Object.keys||(Object.keys=keys=function(b){var a,f;a=[];f=void 0;for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&a.push(f);return a});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};
window.toSentence=function(b){console.log(this);var a,f;f=" "+window.toSentence.and+" ";a=", "+window.toSentence.and+" ";switch(b.length){case 0:b="";break;case 1:b=b[0];break;case 2:b=b[0]+f+b[1];break;default:b=b.slice(0,-1).join(", ")+a+b[b.length-1]}return b};window.toSentence.and="and";
this.Errors=function(){function b(){this.errors=[]}b.prototype.add=function(a){var b,c,d,e;if(a){if("string"===typeof a)return this.errors.push(a);e=[];c=0;for(d=a.length;c<d;c++)b=a[c],e.push(this.errors.push(b));return e}};b.prototype.none=function(){return 0===this.errors.length?!0:!1};b.prototype.fullMessages=function(){return window.toSentence(this.errors).toLowerCase().capitalize()};b.prototype.all=function(){return this.errors};b.prototype.alwaysReturn=function(a){return this.none=function(){return a}};
b.prototype.alwaysNoneIf=function(a){if(a)return this.alwaysReturn([])};b.prototype.alwaysNone=function(){return this.alwaysReturn([])};return b}();
this.Group=function(){function b(a){this.name=a}b.prototype.fields=function(){return this._findInputs()};b.prototype.invalidFields=function(){return this._findInputs("[data-error-message]")};b.prototype.validFields=function(){return this._findInputs(":not([data-error-message])")};b.prototype.containsValidFields=function(){return this.fields().length!==this.invalidFields().length};b.prototype._findInputs=function(a){null==a&&(a="");return document.querySelectorAll('[data-validation*="group:'+this.name+
'"]'+a)};return b}();
this.InputWithValidations=function(){function b(a){this.parser=new Parser;this.input=a;this.customMessage=this.input.getAttribute("data-custom-error-message");this.isInGroup()&&(this.group=new Group(this.groupName()))}b.prototype.setupErrorMessage=function(a){return this.input.setAttribute("data-error-message",this.customMessage||a)};b.prototype.resetErrorMessages=function(){return this.input.removeAttribute("data-error-message")};b.prototype.validations=function(){return this.input.getAttribute("data-validation")?this.parser.parse(this.input.getAttribute("data-validation")):
{}};b.prototype.asHtmlNode=function(){return this.input};b.prototype.isInGroup=function(){return this.validations().group};b.prototype.withoutGroup=function(){var a,f;a=this.input.cloneNode(!1);f=a.getAttribute("data-validation").replace(" ","").split(",").filter(function(a){return!/group:/.test(a)}).join(",");a.setAttribute("data-validation",f);return new b(a)};b.prototype.groupName=function(){return this.validations().group};b.prototype.isEmpty=function(){return"select"===this.input.nodeName.toLowerCase()?
this.input.querySelector("option").text===this.input.value||""===this.input.value?!0:!1:/^.+$/.test(this.input.value)?!1:!0};return b}();var __indexOf=[].indexOf||function(b){for(var a=0,f=this.length;a<f;a++)if(a in this&&this[a]===b)return a;return-1};
this.RangeValidation=function(){function b(a,b,c,d){this.length=a;this.min=b;this.max=c;this.errorMessages=d}b.prototype.validate=function(){var a,b,c;if(this.max&&this.min&&(a=this.length,0>__indexOf.call(function(){c=[];for(var a=b=this.min,e=this.max;b<=e?a<=e:a>=e;b<=e?a++:a--)c.push(a);return c}.apply(this),a)))return this.mixedMessage();if(this.min&&this.length<this.min)return this.tooShortMessage();if(this.max&&this.length>this.max)return this.tooLongMessage()};return b}();
var __hasProp={}.hasOwnProperty,__extends=function(b,a){function f(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);f.prototype=a.prototype;b.prototype=new f;b.__super__=a.prototype;return b};
this.CharacterCountValidation=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.mixedMessage=function(){return this.errorMessages.mixed.replace("{{ min }}",this.min).replace("{{ max }}",this.max)};a.prototype.tooShortMessage=function(){return this.errorMessages.tooShort.replace("{{ min }}",this.min)};a.prototype.tooLongMessage=function(){return this.errorMessages.tooLong.replace("{{ max }}",this.max)};return a}(RangeValidation);__hasProp={}.hasOwnProperty;
__extends=function(b,a){function f(){this.constructor=b}for(var c in a)__hasProp.call(a,c)&&(b[c]=a[c]);f.prototype=a.prototype;b.prototype=new f;b.__super__=a.prototype;return b};
this.WordCountValidation=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}__extends(a,b);a.prototype.mixedMessage=function(){return this.errorMessages.mixed.replace("{{ min }}",this.min).replace("{{ max }}",this.max)};a.prototype.tooShortMessage=function(){return this.errorMessages.tooShort.replace("{{ min }}",this.min)};a.prototype.tooLongMessage=function(){return this.errorMessages.tooLong.replace("{{ max }}",this.max)};return a}(RangeValidation);var errors;errors={};
this.FormValidator=function(){function b(){this._setupBuiltInValidations()}b.prototype.defineValidation=function(a,b,c){return this._validations[a]={validationHandler:b,errorMessage:c}};b.prototype.validateForm=function(a){var b,c,d;b=a.querySelectorAll("[data-validation]");c=0;for(d=b.length;c<d;c++)a=b[c],this.validateInput(a);c=0;for(d=b.length;c<d;c++)if(a=b[c],a.hasAttribute("data-error-message"))return!1;return!0};b.prototype.validateInput=function(a){var b,c,d,e;a=new InputWithValidations(a);
errors=new Errors;if(a.isInGroup()){c=a.group.fields();d=[];for(e=c.length;e--;d.unshift(c[e]));c=0;for(e=d.length;c<e;c++)if(b=d[c],b=(new InputWithValidations(b)).withoutGroup().asHtmlNode(),this.validateInput(b))return!0}else this._performBuiltinValidations(a.asHtmlNode(),a.validations()),this._performFormatValidation(a.asHtmlNode(),a.validations().format);a.resetErrorMessages();if(errors.none())return!0;a.setupErrorMessage(errors.fullMessages());return!1};b.prototype._validations={};b.prototype._performFormatValidation=
function(a,b){var c,d,e,g,h;if(b){g=Object.keys(b);h=[];d=0;for(e=g.length;d<e;d++)c=g[d],this._validations[c].validationHandler.test(a.value)?h.push(void 0):h.push(errors.add(this._validations[c].errorMessage));return h}};b.prototype._performBuiltinValidations=function(a,b){var c,d,e,g,h;g=Object.keys(b);h=[];d=0;for(e=g.length;d<e;d++)c=g[d],"format"!==c?(c=this._validations[c].validationHandler(a,b),h.push(errors.add(c))):h.push(void 0);return h};b.prototype.errorMessages={email:"Email is invalid",
tel:"Telephone number is invalid",number:"Invalid",required:"Can't be blank",checkboxRequired:"Most be checked",wordCount:{mixed:"Can't contain less than {{ min }} or more than {{ max }} words",tooShort:"Can't contain less than {{ min }} words",tooLong:"Can't contain more than {{ max }} words"},characterCount:{mixed:"Value most be at least {{ min }} and maximum {{ max }} characters long",tooShort:"Value most be at least {{ min }}",tooLong:"Value can't be longer than {{ max }}"}};b.prototype.setErrorMessages=
function(a){this.errorMessages=a;this._setupBuiltInValidations()};b.prototype._setupBuiltInValidations=function(){this.defineValidation("email",/.+@.+\..+/,this.errorMessages.email);this.defineValidation("tel",/^\d{8}$/,this.errorMessages.tel);this.defineValidation("number",/^\d+$/,this.errorMessages.number);this.defineValidation("required",function(a){return function(b,c){if((new InputWithValidations(b)).isEmpty())return a.errorMessages.required;if(("checkbox"===b.getAttribute("type")||"radio"===
b.getAttribute("type"))&&!b.checked)return a.errorMessages.checkboxRequired}}(this));this.defineValidation("length",function(a){return function(b,c){return(new CharacterCountValidation(b.value.length,c.length.min,c.length.max,a.errorMessages.characterCount)).validate()}}(this));this.defineValidation("wordCount",function(b){return function(f,c){var d;d=""===f.value?d=0:f.value.split(/[ ]+/).length;return(new WordCountValidation(d,c.wordCount.min,c.wordCount.max,b.errorMessages.wordCount)).validate()}}(this));
this.defineValidation("allowEmpty",function(b){return function(b,a){return errors.alwaysNoneIf(""===b.value)}}(this));this.defineValidation("onlyIfChecked",function(b){return function(b,a){return errors.alwaysNoneIf(!document.getElementById(a.onlyIfChecked).checked)}}(this));this.defineValidation("onlyIfEmpty",function(b){return function(b,a){if(!(new InputWithValidations(document.getElementById(a.onlyIfEmpty))).isEmpty())return errors.alwaysNone()}}(this));return this.defineValidation("group",function(b){return function(b,
a){}}(this))};return b}();this.FormValidator.version="0.3.3";
(function(b,a,f,c){function d(a,c){this.element=a;this.options=b.extend(!0,{},g,c);this._defaults=g;this._name=e;this.init()}var e="validate",g={validator:new FormValidator,onBlur:!1,selectorClasses:{field:".field"},errorClasses:{input:"input-with-error",field:"field-with-error",form:"form-with-error"},beforeValidation:function(){},afterValidation:function(){},ifValid:function(){},ifInvalid:function(){},formWrapperSelector:c,errorMessages:{}};d.prototype={version:"0.3.3",init:function(){var a=this,
c=a.element,d=a.options,e=d.validator,g=b.extend(!0,{},e.errorMessages,d.errorMessages);e.setErrorMessages(g);console.log(e);var l=!0;c.setAttribute("novalidate","true");b(f).on("keydown",function(a){var c;c=13===a.keyCode?!0:void 0;c&&(a=a.target.nodeName.toLowerCase(),c="input"==a||"select"==a?!0:!1);c&&b('input[type="submit"]:not([data-skip-validation])').trigger("click")});b("input[data-skip-validation]").hover(function(){l=!1},function(){l=!0}).on("click",function(a){l&&a.preventDefault()});
var m;b(f).on("click",function(a){m=a.target});b(c).on("submit",function(f){if(l){d.beforeValidation(f,m);var g=[];b(m).parents(d.formWrapperSelector).find("[data-validation]").each(function(){var a=e.validateInput(this);g.push(a);e.validateInput(this)||f.preventDefault()});-1!=g.indexOf(!1)?d.ifInvalid(f,m):d.ifValid(f,m);a.setErrorClasses(c,d);a.setErrorMessages(c,d);b(".input-with-error").first().focus();d.afterValidation(f,m)}});if(d.onBlur)b(c).find("[data-validation]").on("blur",function(b){e.validateInput(this);
a.setErrorClasses(c,d);a.setErrorMessages(c,d)})},setErrorClasses:function(a,c){b("."+c.errorClasses.input).removeClass(c.errorClasses.input);b("."+c.errorClasses.field).removeClass(c.errorClasses.field);b("."+c.errorClasses.form).removeClass(c.errorClasses.form);b(a).find("[data-error-message]").each(function(){var d=b(this),e=d.parents(c.selectorClasses.field),f=b(a);d.addClass(c.errorClasses.input);e.addClass(c.errorClasses.field);f.addClass(c.errorClasses.form)})},setErrorMessages:function(a,
c){b(a).find("small.error-message").remove();b(a).find("[data-error-message]").each(function(){var a=b(this).data("errorMessage");b(this).after('<small class="error-message">'+a+"</small>")})}};b.fn[e]=function(a){return this.each(function(){b.data(this,"plugin_"+e)||b.data(this,"plugin_"+e,new d(this,a))})}})(jQuery,window,document);
